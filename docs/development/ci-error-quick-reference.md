# CIé”™è¯¯å¿«é€Ÿå‚è€ƒå¡ç‰‡

## ğŸš¨ ç´§æ€¥å“åº”æµç¨‹ï¼ˆ2åˆ†é’Ÿå†…ï¼‰

```bash
# 1. å¿«é€ŸæŸ¥çœ‹é”™è¯¯æ‘˜è¦
./backend/test-summary.bat    # Windows
./backend/test-quiet.sh       # Linux/Mac

# 2. è‡ªåŠ¨è¯Šæ–­ï¼ˆæ¨èï¼‰
./scripts/diagnose-ci-failure.bat  # Windows
./scripts/diagnose-ci-failure.sh   # Linux/Mac
```

## ğŸ” é”™è¯¯åˆ†ç±»é€ŸæŸ¥è¡¨

| å…³é”®è¯ | é”™è¯¯ç±»å‹ | ä¼˜å…ˆçº§ | é¢„æœŸæ—¶é—´ | é¦–è¦è¡ŒåŠ¨ |
|--------|----------|--------|----------|----------|
| `compilation failed` | ç¼–è¯‘é”™è¯¯ | ğŸ”´ é«˜ | 5-10åˆ†é’Ÿ | `mvn clean compile` |
| `cannot find symbol` | ç¼–è¯‘é”™è¯¯ | ğŸ”´ é«˜ | 5-10åˆ†é’Ÿ | æ£€æŸ¥å¯¼å…¥è¯­å¥ |
| `Tests run: X, Failures: Y` | æµ‹è¯•å¤±è´¥ | ğŸŸ¡ ä¸­ | 10-30åˆ†é’Ÿ | æŸ¥çœ‹å¤±è´¥æµ‹è¯• |
| `Connection refused` | ç¯å¢ƒé—®é¢˜ | ğŸ”´ é«˜ | 20-60åˆ†é’Ÿ | æ£€æŸ¥Docker |
| `dependency` | ä¾èµ–é—®é¢˜ | ğŸŸ  ä¸­é«˜ | 15-45åˆ†é’Ÿ | `mvn clean install -U` |
| `OutOfMemoryError` | èµ„æºé—®é¢˜ | ğŸŸ  ä¸­é«˜ | 10-20åˆ†é’Ÿ | å¢åŠ å†…å­˜ |

## âš¡ å¿«é€Ÿä¿®å¤å‘½ä»¤

### ç¼–è¯‘é—®é¢˜
```bash
mvn clean compile                    # æ¸…ç†é‡ç¼–è¯‘
mvn dependency:resolve              # è§£æä¾èµ–
mvn clean install -U               # å¼ºåˆ¶æ›´æ–°ä¾èµ–
```

### æµ‹è¯•é—®é¢˜
```bash
mvn test -Dtest=FailedTestClass     # å•ç‹¬è¿è¡Œå¤±è´¥æµ‹è¯•
mvn test -Dspring.profiles.active=test  # æŒ‡å®šæµ‹è¯•ç¯å¢ƒ
mvn clean test                      # æ¸…ç†åé‡æ–°æµ‹è¯•
```

### ç¯å¢ƒé—®é¢˜
```bash
docker ps                          # æ£€æŸ¥å®¹å™¨çŠ¶æ€
docker system prune -f             # æ¸…ç†Dockerèµ„æº
mvn flyway:clean flyway:migrate    # é‡ç½®æ•°æ®åº“
```

### ä¾èµ–é—®é¢˜
```bash
mvn dependency:tree | grep conflict  # æŸ¥æ‰¾å†²çª
mvn dependency:analyze              # åˆ†æä¾èµ–
rm -rf ~/.m2/repository/com/example # æ¸…ç†æœ¬åœ°ä»“åº“
```

## ğŸ“Š æ—¥å¿—åˆ†æè¦ç‚¹

### æŸ¥æ‰¾å…³é”®ä¿¡æ¯
```bash
# æŸ¥æ‰¾é”™è¯¯å’Œå¼‚å¸¸
grep -E "(ERROR|FAIL|Exception)" log-file.txt

# æŸ¥æ‰¾æµ‹è¯•æ‘˜è¦
grep -A 5 -B 5 "Tests run:" log-file.txt

# æŸ¥æ‰¾æ ¹æœ¬åŸå› 
grep -A 10 "Caused by:" log-file.txt
```

### æ—¥å¿—æ–‡ä»¶ä½ç½®
```
backend/target/surefire-reports/*.txt     # å•å…ƒæµ‹è¯•è¯¦ç»†æ—¥å¿—
backend/target/failsafe-reports/*.txt     # é›†æˆæµ‹è¯•è¯¦ç»†æ—¥å¿—
backend/logs/userauth-backend.log         # åº”ç”¨è¿è¡Œæ—¥å¿—
```

## ğŸ› ï¸ ç¯å¢ƒæ£€æŸ¥æ¸…å•

### åŸºç¡€ç¯å¢ƒ
- [ ] Javaç‰ˆæœ¬æ­£ç¡® (`java -version`)
- [ ] Mavenç‰ˆæœ¬å…¼å®¹ (`mvn -version`)
- [ ] ç¯å¢ƒå˜é‡è®¾ç½® (`echo $JAVA_HOME`)
- [ ] ç£ç›˜ç©ºé—´å……è¶³ (`df -h`)

### Dockerç¯å¢ƒ
- [ ] DockeræœåŠ¡è¿è¡Œ (`docker ps`)
- [ ] ç«¯å£æœªè¢«å ç”¨ (`netstat -tulpn | grep :3306`)
- [ ] é•œåƒå¯ç”¨ (`docker images`)

### æ•°æ®åº“ç¯å¢ƒ
- [ ] è¿æ¥é…ç½®æ­£ç¡®
- [ ] è¿ç§»è„šæœ¬æœ‰æ•ˆ (`mvn flyway:info`)
- [ ] æµ‹è¯•æ•°æ®å‡†å¤‡å®Œæˆ

## ğŸ¯ æŒ‰é”™è¯¯ç±»å‹çš„è§£å†³ç­–ç•¥

### ç¼–è¯‘é”™è¯¯ â†’ ä»£ç é—®é¢˜
1. æ£€æŸ¥è¯­æ³•é”™è¯¯
2. éªŒè¯å¯¼å…¥è¯­å¥
3. ç¡®è®¤ä¾èµ–ç‰ˆæœ¬
4. æ¸…ç†é‡æ–°ç¼–è¯‘

### æµ‹è¯•å¤±è´¥ â†’ é€»è¾‘é—®é¢˜
1. å•ç‹¬è¿è¡Œå¤±è´¥æµ‹è¯•
2. æ£€æŸ¥æµ‹è¯•æ•°æ®
3. éªŒè¯ä¸šåŠ¡é€»è¾‘
4. æŸ¥çœ‹æ–­è¨€æ¡ä»¶

### è¿æ¥é”™è¯¯ â†’ ç¯å¢ƒé—®é¢˜
1. æ£€æŸ¥æœåŠ¡çŠ¶æ€
2. éªŒè¯ç½‘ç»œè¿æ¥
3. ç¡®è®¤ç«¯å£é…ç½®
4. é‡å¯ç›¸å…³æœåŠ¡

### ä¾èµ–å†²çª â†’ é…ç½®é—®é¢˜
1. åˆ†æä¾èµ–æ ‘
2. æ˜ç¡®æŒ‡å®šç‰ˆæœ¬
3. æ’é™¤å†²çªä¾èµ–
4. æ›´æ–°pom.xml

## ğŸ“ å‡çº§è·¯å¾„

### æ—¶é—´é˜ˆå€¼
- **15åˆ†é’Ÿ**: å¯»æ±‚å›¢é˜Ÿå¸®åŠ©
- **30åˆ†é’Ÿ**: è”ç³»æŠ€æœ¯è´Ÿè´£äºº
- **60åˆ†é’Ÿ**: å‡çº§åˆ°æ¶æ„å¸ˆ

### å¤æ‚åº¦é˜ˆå€¼
- **å¤šç»„ä»¶é—®é¢˜**: ç«‹å³å‡çº§
- **åŸºç¡€è®¾æ–½é—®é¢˜**: è”ç³»è¿ç»´
- **å®‰å…¨ç›¸å…³é—®é¢˜**: è”ç³»å®‰å…¨å›¢é˜Ÿ

## ğŸ“ è®°å½•æ¨¡æ¿

```
é—®é¢˜: [ç®€çŸ­æè¿°]
æ—¶é—´: [å‘ç”Ÿæ—¶é—´]
é”™è¯¯: [å…³é”®é”™è¯¯ä¿¡æ¯]
å°è¯•: [å·²å°è¯•çš„è§£å†³æ–¹æ¡ˆ]
ç»“æœ: [å½“å‰çŠ¶æ€]
```

## ğŸ”— æœ‰ç”¨é“¾æ¥

- [å®Œæ•´æ•…éšœæ’é™¤æŒ‡å—](./ci-error-troubleshooting-guide.md)
- [æ•…éšœè®°å½•æ—¥å¿—](./troubleshooting-log.md)
- [Mavenå®˜æ–¹æ–‡æ¡£](https://maven.apache.org/guides/)
- [Spring Bootæµ‹è¯•æŒ‡å—](https://spring.io/guides/gs/testing-web/)

---
**æç¤º**: ä¿å­˜æ­¤é¡µé¢ä¸ºä¹¦ç­¾ï¼Œåœ¨CIå¤±è´¥æ—¶å¿«é€ŸæŸ¥é˜…ï¼